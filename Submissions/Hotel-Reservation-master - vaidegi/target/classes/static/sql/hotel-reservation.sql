
DROP DATABASE IF EXISTS `hotel-reservation`;
CREATE DATABASE `hotel-reservation`; 
USE `hotel-reservation`;

DROP TABLE IF EXISTS `reservation`;

CREATE TABLE `reservation` (
  `reservation_id` int NOT NULL AUTO_INCREMENT,
  `reservation_from_date` datetime(6) DEFAULT NULL,
  `reservation_num_of_children` int DEFAULT NULL,
  `reservation_open_buffet` varchar(255) DEFAULT NULL,
  `reservation_num_of_persons` int DEFAULT NULL,
  `reservation_price` int DEFAULT NULL,
  `reservation_room` varchar(255) DEFAULT NULL,
  `reservation_num_of_rooms` int DEFAULT NULL,
  `reservation_stay_days` int DEFAULT NULL,
  `reservation_user_id` int DEFAULT NULL,
  PRIMARY KEY (`reservation_id`),
 
CREATE TABLE ROOM(
  ROOM_ID BIGINT AUTO_INCREMENT PRIMARY KEY,
  NAME VARCHAR(16) NOT NULL,
  ROOM_NUMBER CHAR(2) NOT NULL UNIQUE,
  BED_INFO CHAR(2) NOT NULL
);

CREATE TABLE GUEST(
  GUEST_ID BIGINT AUTO_INCREMENT PRIMARY KEY,
  FIRST_NAME VARCHAR(64),
  LAST_NAME VARCHAR(64),
  EMAIL_ADDRESS VARCHAR(64),
  ADDRESS VARCHAR(64),
  COUNTRY VARCHAR(32),
  STATE VARCHAR(12),
  PHONE_NUMBER VARCHAR(24)
);

CREATE TABLE RESERVATION(
  RESERVATION_ID BIGINT AUTO_INCREMENT PRIMARY KEY,
  ROOM_ID BIGINT NOT NULL,
  GUEST_ID BIGINT NOT NULL,
  RES_DATE DATE
);

ALTER TABLE RESERVATION ADD FOREIGN KEY (ROOM_ID) REFERENCES ROOM(ROOM_ID);
ALTER TABLE RESERVATION ADD FOREIGN KEY (GUEST_ID) REFERENCES GUEST(GUEST_ID);
CREATE INDEX IDX_RES_DATE_ ON RESERVATION(RES_DATE);

 